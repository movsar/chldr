@inherits EntryEditViewModel

@page "/entry/edit/{EntryId?}"

<div data-id="form_container">
    <div class="form-group mt-2 mb-2">
        <h5>@Localizer["Entry_type"]</h5>
        <select class="form-control" @onchange="@HandleEntryTypeChange">
            <option value="@(EntryType.Word)">@Localizer["Word"]</option>
            <option value="@(EntryType.Phrase)">@Localizer["Phrase"]</option>
            <option value="@(EntryType.Text)">@Localizer["Text"]</option>
        </select>
    </div>

    @switch (SelectedEntryType)
    {
        case EntryType.Word:
            <WordEditView EntryId="@EntryId"></WordEditView>
            break;

        case EntryType.Phrase:
            break;

        case EntryType.Text:
            <h1>Text</h1>
            break;

        default:
            break;
    }

    <h5 class="mt-2">
        @Localizer["Translations"]:
        <button class="btn btn-success" type="button" @onclick="@(() => NewTranslation())">@Localizer["Add"]</button>
    </h5>

    <div class="mt-2">
        @foreach (var translation in EntryDto.Translations)
        {
            <div class="mb-4">
                <TranslationEditView Translation="@translation" OnDelete="@(async (translationId) => await DeleteTranslation(translationId))"></TranslationEditView>
                @*<hr/>*@
            </div>
        }
    </div>

    <FormErrorsView ErrorMessages="@ErrorMessages" />

    <div class="mt-3 float-end">
        <button class="btn btn-light" @onclick="@(()=>NavigationManager.NavigateTo("/"))">@Localizer["Cancel"]</button>
        <button class="btn btn-primary" @onclick="@SaveClickHandler">@Localizer["Save"]</button>
        @*<button class="btn btn-primary">Save and add another</button>*@
    </div>
</div>