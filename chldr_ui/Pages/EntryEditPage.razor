@inherits EntryEditViewModel

@page "/entry/edit/{EntryId?}"

<style>
    .remove-button {
        font-size: 24px;
        background-color: transparent;
        border-radius: 4px;
        border: none;
        color: #000;
        cursor: pointer;
        padding: 5px;
    }

    .record {
        background-color: #f44336;
    }

    .stop {
        background-color: #ff9800;
    }

    .audio {
        flex-shrink: 5;
        margin-bottom: 15px;
    }

    #recordings-list {
        width: 30%;
        min-width: 350px;
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
    }

    .recording-list-item {
        margin-top: 5px;
        width: 30%;
        min-width: 350px;
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;
    }

</style>

<div data-id="form_container">
    <div class="form-group mt-2 mb-2">
        <h5>@Localizer["Entry_type"]</h5>
        <select class="form-control" @onchange="@HandleEntryTypeChange">
            <option value="@(EntryType.Word)">@Localizer["Word"]</option>
            <option value="@(EntryType.Phrase)">@Localizer["Phrase"]</option>
            <option value="@(EntryType.Text)">@Localizer["Text"]</option>
        </select>
    </div>

    @switch (SelectedEntryType)
    {
        case EntryType.Word:
            <WordEditView EntryDto="@EntryDto"></WordEditView>
            break;

        case EntryType.Phrase:
            break;

        case EntryType.Text:
            <h1>Text</h1>
            break;

        default:
            break;
    }

    <div>
        <button id="recordButton" class="button record" @onclick="ToggleRecording">Add Pronunciation</button>
        <div id="recordings-list"></div>
    </div>

    <h5 class="mt-2">
        @Localizer["Translations"]:
        <button class="btn btn-success" type="button" @onclick="@(() => NewTranslation())">@Localizer["Add"]</button>
    </h5>

    <div class="mt-2">
        @foreach (var translation in EntryDto.Translations)
        {
            <div class="mb-4">
                <TranslationEditView Translation="@translation" OnDelete="@(async (translationId) => await DeleteTranslation(translationId))"></TranslationEditView>
                @*<hr/>*@
            </div>
        }
    </div>

    <FormErrorsView ErrorMessages="@ErrorMessages" />

    <div class="mt-3 float-end">
        <button class="btn btn-light" @onclick="@(()=>NavigationManager.NavigateTo("/"))">@Localizer["Cancel"]</button>
        <button class="btn btn-primary" @onclick="@SaveClickHandler">@Localizer["Save"]</button>
        @*<button class="btn btn-primary">Save and add another</button>*@
    </div>
</div>